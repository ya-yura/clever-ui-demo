/* === üìÅ src/index.css === */
/* Global styles */

/* Fonts */
@font-face {
  font-family: 'Atkinson Hyperlegible';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('./assets/fonts/AtkinsonHyperlegible-Regular.ttf') format('truetype');
}

@font-face {
  font-family: 'Atkinson Hyperlegible';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('./assets/fonts/AtkinsonHyperlegible-Bold.ttf') format('truetype');
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   üé® CSS VARIABLES FOR THEME SWITCHING
   Design System v3.1.0
   ============================================ */

/* Default theme (Dark) */
:root {
  /* Typography */
  --font-family-base: 'Atkinson Hyperlegible', 'Noto Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Avenir, Helvetica, Arial, sans-serif;
  --font-family-mono: 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', ui-monospace, monospace;

  /* Surface colors (backgrounds) */
  --color-surface-primary: #2c2c2e; /* Main app background - slightly darker */
  --color-surface-secondary: #3c3c3e; /* Cards, Inputs - slightly lighter */
  --color-surface-tertiary: #48484a; /* Hovers, secondary elements */
  --color-surface-inverse: #ffffff;
  --color-surface-overlay: rgba(44, 44, 46, 0.85);
  --color-surface-disabled: #2c2c2e;

  /* Content colors (text) */
  --color-content-primary: #f0f0f0;
  --color-content-secondary: #b0b0b0;
  --color-content-tertiary: #808080;
  --color-content-inverse: #2c2c2e;
  --color-content-disabled: #525760;

  /* Border colors */
  --color-border-default: #3a3a3c; /* Dark mode: slightly lighter than bg, darker than content */
  --color-border-light: #5c5c5c;
  --color-border-strong: #707070;
  --color-border-focus: #d89668;

  /* Atomized surfaces/borders (used across cards and chips) */
  --atom-card-bg: var(--color-surface-secondary);
  --atom-card-border: color-mix(in srgb, var(--color-border-default) 65%, transparent);
  --atom-card-hover: color-mix(in srgb, var(--color-surface-tertiary) 80%, transparent);
  --atom-chip-bg: color-mix(in srgb, var(--color-surface-primary) 85%, transparent);
  --atom-chip-border: color-mix(in srgb, var(--color-border-default) 45%, transparent);

  /* Spacing tokens */
  --spacing-xs: 0.25rem;   /* 4px */
  --spacing-sm: 0.5rem;    /* 8px */
  --spacing-md: 1rem;      /* 16px */
  --spacing-lg: 1.5rem;    /* 24px */
  --spacing-xl: 2rem;      /* 32px */

  /* Border radius tokens */
  --radius-sm: 0.5rem;     /* 8px */
  --radius-md: 0.75rem;    /* 12px */
  --radius-lg: 1rem;       /* 16px */
  --radius-xl: 1.5rem;    /* 24px */
  --radius-full: 9999px;

  /* Brand colors (base palette from Figma) */
  --color-brand-primary: #d89668;
  --color-brand-dark: #3d2817;
  --color-brand-light: #ffcda3;
  --color-brand-secondary: #c9a636;
  --color-brand-secondary-dark: #a88a2d;
  --color-brand-secondary-light: #f3d640;
  --color-brand-tertiary: #f0a58a;
  --color-brand-tertiary-dark: #c76b5b;
  --color-brand-tertiary-light: #fcd0d0;

  /* Accent colors for secondary elements */
  --color-accent-cyan: #4dd0e1;
  --color-accent-cyan-dark: #26a69a;
  --color-accent-cyan-light: #80deea;
  --color-accent-green: #7ed321;
  --color-accent-green-dark: #5a9c15;
  --color-accent-green-light: #a8e063;
  --color-accent-yellow: #e0b536;
  --color-accent-yellow-dark: #b8942a;
  --color-accent-yellow-light: #f3d640;

  /* Status colors */
  --color-success: #5fad05;
  --color-success-dark: #2d6b2d;
  --color-success-light: #d4f8d4;
  --color-warning: #e78018;
  --color-warning-dark: #8b5931;
  --color-warning-light: #ffd9b3;
  --color-error: #e35454;
  --color-error-dark: #6b3d3c;
  --color-error-light: #f0d6d6;
  --color-info: #4dd0e1;
  --color-info-dark: #26a69a;
  --color-info-light: #80deea;

  /* Status card backgrounds (for line/item status) */
  --color-status-completed-bg: color-mix(in srgb, var(--color-success) 20%, transparent);
  --color-status-completed-border: color-mix(in srgb, var(--color-success) 50%, transparent);
  --color-status-partial-bg: color-mix(in srgb, var(--color-warning) 20%, transparent);
  --color-status-partial-border: color-mix(in srgb, var(--color-warning) 50%, transparent);
  --color-status-error-bg: color-mix(in srgb, var(--color-error) 20%, transparent);
  --color-status-error-border: color-mix(in srgb, var(--color-error) 50%, transparent);
  --color-status-default-bg: var(--color-surface-secondary);
  --color-status-default-border: var(--color-border-default);

  /* Document header card */
  --color-doc-header-bg: var(--color-surface-secondary);
  --color-doc-header-border: color-mix(in srgb, var(--color-brand-primary) 60%, transparent);
  --color-doc-header-padding: 0.625rem; /* p-2.5 */

  /* Status badge */
  --color-status-badge-completed-bg: var(--color-success-light);
  --color-status-badge-completed-text: var(--color-success-dark);
  --color-status-badge-warning-bg: var(--color-warning-light);
  --color-status-badge-warning-text: var(--color-warning-dark);
  --color-status-badge-error-bg: var(--color-error-light);
  --color-status-badge-error-text: var(--color-error-dark);
  --color-status-badge-info-bg: var(--color-info-light);
  --color-status-badge-info-text: var(--color-info-dark);

  /* Statistics chips */
  --color-stat-brand-bg: color-mix(in srgb, var(--color-brand-primary) 10%, transparent);
  --color-stat-brand-text: var(--color-brand-primary);
  --color-stat-success-bg: var(--color-success-light);
  --color-stat-success-text: var(--color-success-dark);
  --color-stat-warning-bg: var(--color-warning-light);
  --color-stat-warning-text: var(--color-warning-dark);
  --color-stat-error-bg: var(--color-error-light);
  --color-stat-error-text: var(--color-error-dark);
  --color-stat-info-bg: var(--color-info-light);
  --color-stat-info-text: var(--color-info-dark);

  /* Current cell/context highlight */
  --color-context-highlight-bg: color-mix(in srgb, var(--color-brand-primary) 10%, transparent);
  --color-context-highlight-text: var(--color-brand-primary);
  --color-context-highlight-border: color-mix(in srgb, var(--color-brand-primary) 30%, transparent);

  /* Item/product cards */
  --color-item-card-bg: var(--color-surface-secondary);
  --color-item-card-padding: 0.5rem; /* p-2 */
  --color-item-card-border-default: color-mix(in srgb, var(--color-border-default) 60%, transparent);
  --color-item-card-border-success: color-mix(in srgb, var(--color-success) 70%, transparent);
  --color-item-card-border-error: color-mix(in srgb, var(--color-error) 70%, transparent);
  --color-item-card-bg-success: color-mix(in srgb, var(--color-success) 10%, transparent);
  --color-item-card-bg-error: color-mix(in srgb, var(--color-error) 10%, transparent);

  /* Bottom action bar */
  --color-bottom-bar-bg: var(--color-surface-primary);
  --color-bottom-bar-border: var(--color-border-default);
  --color-bottom-bar-padding: 0.5rem; /* p-2 */

  /* Separator */
  --color-separator: var(--color-border-default);

  /* Module colors */
  --color-module-receiving-bg: #d89668;
  --color-module-receiving-text: #7d4a2d;
  --color-module-picking-bg: #c9a636;
  --color-module-picking-text: #5a4a1a;
  --color-module-shipment-bg: #a0d995;
  --color-module-shipment-text: #1f4d1f;
  --color-module-placement-bg: #86e0cb;
  --color-module-placement-text: #154038;
  --color-module-inventory-bg: #f0a58a;
  --color-module-inventory-text: #7d4a2d;
  --color-module-return-bg: #e35454;
  --color-module-return-text: #ffffff;
  --color-module-transfer-bg: #4dd0e1;
  --color-module-transfer-text: #154038;
  --color-module-marking-bg: #7ed321;
  --color-module-marking-text: #154038;
}

/* Light theme override */
[data-theme='light'] {
  --color-surface-primary: #f5f6f8;
  --color-surface-secondary: #ffffff;
  --color-surface-tertiary: #eaecf0;
  --color-surface-inverse: #343436;
  --color-surface-overlay: rgba(255, 255, 255, 0.8);
  --color-surface-disabled: #f5f6f8;

  --color-content-primary: #1d222a;
  --color-content-secondary: #525760;
  --color-content-tertiary: #80858e;
  --color-content-inverse: #ffffff;
  --color-content-disabled: #d4d5d9;

  --color-border-default: #eaecf0; /* Light mode: very subtle border */
  --color-border-light: #f2f4f7;
  --color-border-strong: #d0d5dd;
  --color-border-focus: #d89668;
  
  /* Atomized surfaces/borders overrides for light */
  --atom-card-bg: var(--color-surface-secondary);
  --atom-card-border: color-mix(in srgb, var(--color-border-default) 55%, transparent);
  --atom-card-hover: color-mix(in srgb, var(--color-surface-tertiary) 80%, transparent);
  --atom-chip-bg: color-mix(in srgb, var(--color-surface-primary) 90%, transparent);
  --atom-chip-border: color-mix(in srgb, var(--color-border-default) 45%, transparent);
  
  /* Status card backgrounds for light theme */
  --color-status-completed-bg: color-mix(in srgb, var(--color-success-light) 40%, transparent);
  --color-status-completed-border: color-mix(in srgb, var(--color-success) 40%, transparent);
  --color-status-partial-bg: color-mix(in srgb, var(--color-warning-light) 40%, transparent);
  --color-status-partial-border: color-mix(in srgb, var(--color-warning) 40%, transparent);
  --color-status-error-bg: color-mix(in srgb, var(--color-error-light) 40%, transparent);
  --color-status-error-border: color-mix(in srgb, var(--color-error) 40%, transparent);
  
  /* In light mode, we might want to adjust some module colors if they are too light/dark, 
     but for now we keep branding consistent. 
     If needed, we can override them here using the 'light' variant from design system. */
}

html {
  font-family: var(--font-family-base, 'Atkinson Hyperlegible', 'Noto Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Avenir, Helvetica, Arial, sans-serif);
  line-height: 1.5;
  font-weight: 400;
  color-scheme: dark;
  color: var(--color-content-secondary);
  background-color: var(--color-surface-primary);
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
}

html[data-theme='light'] {
  color-scheme: light;
}

body {
  margin: 0;
  min-height: 100vh;
  overflow-x: hidden;
  background-color: var(--color-surface-primary);
  color: var(--color-content-secondary);
  font-family: inherit;
}

/* Shared atoms */
.atom-card {
  background-color: var(--atom-card-bg);
  border: 1px solid var(--atom-card-border);
  border-radius: var(--radius-md);
}
.atom-card.hoverable:hover {
  background-color: var(--atom-card-hover);
}
.atom-chip {
  background-color: var(--atom-chip-bg);
  border: 1px solid var(--atom-chip-border);
  border-radius: var(--radius-sm);
}

/* Status card variants */
.card-status-completed {
  background-color: var(--color-status-completed-bg);
  border-color: var(--color-status-completed-border);
}
.card-status-partial {
  background-color: var(--color-status-partial-bg);
  border-color: var(--color-status-partial-border);
}
.card-status-error {
  background-color: var(--color-status-error-bg);
  border-color: var(--color-status-error-border);
}
.card-status-default {
  background-color: var(--color-status-default-bg);
  border-color: var(--color-status-default-border);
}

* {
  box-sizing: border-box;
}

button,
input,
textarea,
select {
  font-family: inherit;
}

code,
pre,
kbd,
samp {
  font-family: var(--font-family-mono, 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', ui-monospace, monospace);
}

@layer components {
  .btn-primary {
    @apply px-4 py-2 rounded-lg font-semibold hover:brightness-90 active:brightness-95 transition-all min-h-[44px] min-w-[44px];
    background-color: var(--color-brand-primary);
    color: var(--color-brand-dark);
  }

  .btn-secondary {
    @apply px-4 py-2 bg-surface-tertiary text-content-primary rounded-lg font-semibold hover:brightness-110 active:brightness-95 transition-colors min-h-[44px] min-w-[44px];
  }

  .btn-success {
    @apply px-4 py-2 bg-success text-white rounded-lg font-bold hover:brightness-110 active:brightness-95 transition-colors min-h-[44px] min-w-[44px];
  }

  .btn-danger {
    @apply px-4 py-2 bg-error text-white rounded-lg font-bold hover:brightness-110 active:brightness-95 transition-colors min-h-[44px] min-w-[44px];
  }

  .btn-warning {
    @apply px-4 py-2 bg-warning text-white rounded-lg font-semibold hover:brightness-110 active:brightness-95 transition-colors min-h-[44px] min-w-[44px];
  }

  .card {
    @apply bg-surface-secondary border border-borders-default rounded-lg shadow-md p-4 text-content-primary;
  }

  .card-compact {
    @apply bg-surface-secondary border border-borders-default rounded-lg shadow-md px-3 py-2 text-content-primary;
  }

  /* Status-aware card base */
  .card-status {
    @apply border-2 rounded-lg transition-colors bg-surface-secondary;
  }

  .input-field {
    @apply w-full px-3 py-2 border border-borders-default rounded-lg bg-surface-secondary text-content-primary focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-brand-primary min-h-[44px] placeholder:text-content-tertiary;
  }

  .status-badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  }

  /* Chips */
  .chip {
    @apply inline-flex items-center justify-center rounded-full px-4 py-2 text-sm leading-tight whitespace-nowrap min-w-0 shrink-0 select-none font-medium
           border border-borders-default bg-transparent text-content-secondary transition-all;
  }

  .chip:hover:not(.chip-active) { @apply bg-surface-tertiary border-borders-strong; }

  .chip-active { @apply bg-brand-primary text-white border-brand-primary font-semibold shadow-sm; }

  /* Tiles */
  .tile-base {
    @apply rounded-xl text-left transition-all shadow-lg relative overflow-hidden flex flex-col justify-between focus:outline-none focus:ring-2 border border-transparent;
    box-shadow: 0 0 0 0 transparent;
  }
  
  .tile-base:focus {
    box-shadow: 0 0 0 3px rgba(216, 150, 104, 0.4);
  }

  .tile-primary {
    @apply tile-base p-4 md:p-5 min-h-[108px] hover:brightness-110 active:scale-[0.99];
  }

  .tile-secondary {
    @apply tile-base p-4 md:p-5 min-h-[96px] hover:brightness-110 active:scale-[0.99];
  }

  .tile-tertiary {
    @apply tile-base p-3 md:p-4 min-h-[72px] hover:brightness-110 active:scale-[0.99];
  }

  .tile-outline {
    @apply bg-transparent border border-borders-strong;
  }

  /* Tile Typography */
  .tile-title-lg {
    @apply text-xl md:text-[20px] font-bold mb-1 tracking-tight;
  }

  .tile-title-md {
    @apply text-base md:text-[16px] font-semibold mb-0.5 tracking-tight truncate;
  }

  .tile-title-sm {
    @apply text-sm md:text-[15px] font-semibold mb-0.5 tracking-tight truncate;
  }

  .tile-subtext {
    @apply text-xs md:text-sm opacity-80 leading-relaxed;
  }

  .tile-footer {
    @apply mt-1 pt-1 flex items-center justify-end;
  }

  .tile-count-hero {
    @apply text-2xl md:text-3xl font-bold;
  }

  .tile-count-dark {
    @apply text-xs font-semibold opacity-80;
  }

  .tile-count-light {
    @apply text-xs font-semibold opacity-80;
  }

  /* Priority tones */
  .tone-strong {
    @apply filter saturate-100;
  }

  .tone-medium {
    @apply filter saturate-100;
  }

  .tone-muted {
    @apply filter saturate-50 brightness-95;
  }

  .theme-chip-active-success {
    background-color: var(--color-success-dark);
    color: var(--color-success-light);
    border-color: transparent;
  }

  html[data-theme='light'] .theme-chip-active-success {
    background-color: var(--color-success-light);
    color: var(--color-success-dark);
  }

  .theme-chip-active-info {
    background-color: var(--color-info-dark);
    color: var(--color-info-light);
    border-color: transparent;
  }

  html[data-theme='light'] .theme-chip-active-info {
    background-color: var(--color-info-light);
    color: var(--color-info-dark);
  }

  /* Document header card */
  .doc-header-card {
    background-color: var(--color-doc-header-bg);
    border: 1px solid var(--color-doc-header-border);
    border-radius: var(--radius-md);
    padding: var(--color-doc-header-padding);
  }

  /* Status badges */
  .status-badge-completed {
    background-color: var(--color-status-badge-completed-bg);
    color: var(--color-status-badge-completed-text);
  }
  .status-badge-warning {
    background-color: var(--color-status-badge-warning-bg);
    color: var(--color-status-badge-warning-text);
  }
  .status-badge-error {
    background-color: var(--color-status-badge-error-bg);
    color: var(--color-status-badge-error-text);
  }
  .status-badge-info {
    background-color: var(--color-status-badge-info-bg);
    color: var(--color-status-badge-info-text);
  }

  /* Statistics chips */
  .stat-chip-brand {
    background-color: var(--color-stat-brand-bg);
    color: var(--color-stat-brand-text);
  }
  .stat-chip-success {
    background-color: var(--color-stat-success-bg);
    color: var(--color-stat-success-text);
  }
  .stat-chip-warning {
    background-color: var(--color-stat-warning-bg);
    color: var(--color-stat-warning-text);
  }
  .stat-chip-error {
    background-color: var(--color-stat-error-bg);
    color: var(--color-stat-error-text);
  }
  .stat-chip-info {
    background-color: var(--color-stat-info-bg);
    color: var(--color-stat-info-text);
  }

  /* Context highlight (current cell, current item, etc.) */
  .context-highlight {
    background-color: var(--color-context-highlight-bg);
    color: var(--color-context-highlight-text);
    border-color: var(--color-context-highlight-border);
  }

  /* Item/product card base */
  .item-card {
    background-color: var(--color-item-card-bg);
    border-radius: var(--radius-md);
    padding: var(--color-item-card-padding);
    border: 1px solid var(--color-item-card-border-default);
  }
  .item-card-success {
    border-color: var(--color-item-card-border-success);
    background-color: var(--color-item-card-bg-success);
  }
  .item-card-error {
    border-color: var(--color-item-card-border-error);
    background-color: var(--color-item-card-bg-error);
  }

  /* Bottom action bar */
  .bottom-action-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: var(--color-bottom-bar-bg);
    border-top: 1px solid var(--color-bottom-bar-border);
    padding: var(--color-bottom-bar-padding);
    max-width: 48rem; /* max-w-3xl */
  }

  /* Utility classes for consistent styling across all operation screens */
  .doc-header {
    @apply rounded-lg p-2.5;
    background-color: var(--color-doc-header-bg);
    border: 1px solid var(--color-doc-header-border);
  }

  .stat-chip {
    @apply rounded-lg p-2 text-center;
  }
  .stat-chip-brand {
    background-color: var(--color-stat-brand-bg);
    color: var(--color-stat-brand-text);
  }
  .stat-chip-success {
    background-color: var(--color-stat-success-bg);
    color: var(--color-stat-success-text);
  }
  .stat-chip-warning {
    background-color: var(--color-stat-warning-bg);
    color: var(--color-stat-warning-text);
  }
  .stat-chip-error {
    background-color: var(--color-stat-error-bg);
    color: var(--color-stat-error-text);
  }
  .stat-chip-info {
    background-color: var(--color-stat-info-bg);
    color: var(--color-stat-info-text);
  }

  .status-badge {
    @apply px-2 py-1.5 rounded-lg text-center text-xs font-bold;
  }
  .status-badge-completed {
    background-color: var(--color-status-badge-completed-bg);
    color: var(--color-status-badge-completed-text);
  }
  .status-badge-warning {
    background-color: var(--color-status-badge-warning-bg);
    color: var(--color-status-badge-warning-text);
  }
  .status-badge-error {
    background-color: var(--color-status-badge-error-bg);
    color: var(--color-status-badge-error-text);
  }
  .status-badge-info {
    background-color: var(--color-status-badge-info-bg);
    color: var(--color-status-badge-info-text);
  }

  .context-highlight {
    @apply rounded-lg p-2.5 relative;
    background-color: var(--color-context-highlight-bg);
    color: var(--color-context-highlight-text);
    border-color: var(--color-context-highlight-border);
  }

  .item-card-base {
    @apply rounded-lg p-2;
    background-color: var(--color-item-card-bg);
    border: 1px solid var(--color-item-card-border-default);
  }
  .item-card-success {
    border-color: var(--color-item-card-border-success);
    background-color: var(--color-item-card-bg-success);
  }
  .item-card-error {
    border-color: var(--color-item-card-border-error);
    background-color: var(--color-item-card-bg-error);
  }
}

/* Touch targets */
button, a, input[type="button"], input[type="submit"] {
  min-height: 44px;
  min-width: 44px;
}

/* Loading animations */
@keyframes pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.05) 63%);
  animation: pulse 1.5s ease-in-out infinite;
}

.skeleton-wave {
  background: linear-gradient(
    90deg,
    var(--color-surface-tertiary) 0%,
    var(--color-surface-tertiary) 40%,
    var(--color-surface-secondary) 50%,
    var(--color-surface-tertiary) 60%,
    var(--color-surface-tertiary) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

html[data-theme='light'] .skeleton {
    background: linear-gradient(90deg, rgba(0,0,0,0.05) 25%, rgba(0,0,0,0.12) 37%, rgba(0,0,0,0.05) 63%);
}
